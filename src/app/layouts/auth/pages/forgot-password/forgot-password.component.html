<div class="text-center mb-4">
  <a href="." class="navbar-brand navbar-brand-autodark"
    ><img src="./assets/img/static/logo.svg" height="76" alt=""
  /></a>
</div>
<div *ngIf="message != ''" [ngClass]="classmsg">{{ message }}</div>
<form class="card card-md" #formLogin="ngForm" novalidate>
  <div class="card-body">
    <h2 class="card-title text-center mb-4">{{formTitle}}</h2>
    <p class="text-muted mb-4">{{formText}}</p>
    <div class="mb-3" *ngIf="!submitted_reset">
      <label class="form-label">Email address</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="email.invalid && email.touched"
        placeholder="Enter email"
        name="email"
        #email="ngModel"
        [(ngModel)]="user.email"
        required
        pattern="^[a-z0-9-.]+@[a-z-]+\.[a-z]{2,3}$" 
      />
      <div *ngIf="email.errors && (email.valid || email.touched)">
        <p class="text-danger" *ngIf="email.errors?.required">
          Please Enter your Email Address
        </p>
        <p class="text-danger" *ngIf="email.errors?.pattern">
          Invalid Email Address
        </p>
      </div>
    </div>
    <div class="mb-3" *ngIf="submitted_reset">
      <label class="form-label">Code validation</label>
      <input
        type="number"
        class="form-control"
        [class.is-invalid]="code.invalid && code.touched"
        placeholder="Enter code 6 digits"
        name="code"
        #code="ngModel"
        [(ngModel)]="validation.code"
        required
        minlength="6"
      />
      <div *ngIf="code.errors && (code.valid || code.touched)">
        <p class="text-danger" *ngIf="code.errors?.required">
          Please Enter the validation code
        </p>
        <p class="text-danger" *ngIf="code.errors?.maxlength">
          Please Enter 6 digits
        </p>
        <p class="text-danger" *ngIf="code.errors?.minlength">
          Please Enter 6 digits
        </p>
      </div>
    </div>
    <div class="form-footer" *ngIf="!submitted_reset">
      <button
        type="button"
        id="btn-forgot"
        style="cursor: pointer"
        [disabled]="formLogin.invalid"
        (click)="onResetPassword()"
        class="btn btn-primary w-100"
      >
      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2"
        stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <rect x="3" y="5" width="18" height="14" rx="2" />
        <polyline points="3 7 12 13 21 7" />
      </svg>
        Send me
        <div *ngIf="loading" class="spinner-grow text-light" role="status">
          <span class="sr-only"></span>
        </div>
      </button>
    </div>
    <div class="form-footer" *ngIf="submitted_reset">
      <div class="mb-3">
        <div class="btn-group w-100">
          <button
            type="button"
            class="btn btn-success"
            type="button"
            id="btn-forgot"
            style="cursor: pointer"
            (click)="onResendCode()"
          >
            Resend
            <div *ngIf="loading" class="spinner-grow text-light" role="status">
              <span class="sr-only"></span>
            </div>
          </button>
          <button
            type="button"
            class="btn btn-primary"
            type="button"
            id="btn-validation"
            style="cursor: pointer"
            [disabled]="formLogin.invalid"
            (click)="onCodeValidation()"
          >
            Validate
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
<div class="text-center text-muted mt-3">
  Already remember?
  <a routerLink="/auth/login" tabindex="-1">Sign in</a>
</div>
