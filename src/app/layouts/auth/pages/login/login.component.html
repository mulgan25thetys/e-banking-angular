<div *ngIf="authIsLocked ; then lockForm else loginForm"></div>

<ng-template #loginForm>
  <div class="text-center mb-4">
    <a href="." class="navbar-brand navbar-brand-autodark"
      ><img src="./assets/img/static/logo.svg" height="76" alt=""
    /></a>
  </div>
  <div *ngIf="errors != ''" class="alert alert-danger">{{ errors }}</div>
  <form class="card card-md" #formLogin="ngForm" novalidate>
    <div class="card-body">
      <h2 class="card-title text-center mb-4">Login to your account</h2>
      <div class="mb-3">
        <label class="form-label">Username</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter Username"
          [class.is-invalid]="username.invalid && username.touched"
          name="username"
          [(ngModel)]="user.username"
          #username="ngModel"
          required
        />
        <div *ngIf="username.errors && (username.valid || username.touched)">
          <p class="text-danger" *ngIf="username.errors?.required">
            Please Enter your Username
          </p>
        </div>
      </div>
      <div class="mb-2">
        <label class="form-label">
          Password
          <span class="form-label-description">
            <a routerLink="/auth/forgot-password">I forgot password</a>
          </span>
        </label>
        <div class="input-group input-group-flat">
          <input
            type="password"
            id="password"
            class="form-control"
            placeholder="Password"
            [class.is-invalid]="password.invalid && password.touched"
            name="password"
            [(ngModel)]="user.password"
            #password="ngModel"
            required
          />
          <span class="input-group-text">
            <a
              id="show-password"
              class="link-secondary"
              title="Show password"
              data-bs-toggle="tooltip"
              (click)="showHidePassword()"
              style="cursor: pointer"
            >
              <!-- Download SVG icon from http://tabler-icons.io/i/eye -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="icon"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <circle cx="12" cy="12" r="2" />
                <path
                  d="M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"
                />
              </svg>
            </a>
          </span>
        </div>
        <div *ngIf="password.errors && (password.valid || password.touched)">
          <p class="text-danger" *ngIf="password.errors?.required">
            Please Enter your Password
          </p>
        </div>
      </div>
      <div class="mb-2">
        <label class="form-check">
          <input type="checkbox" class="form-check-input" />
          <span class="form-check-label">Remember me on this device</span>
        </label>
      </div>
      <div class="form-footer">
        <button
          type="button"
          id="btn-login"
          style="cursor: pointer"
          [disabled]="formLogin.invalid"
          (click)="onLogin()"
          class="btn btn-primary w-100"
        >
          Sign in
          <div *ngIf="loading" class="spinner-grow text-light" role="status">
            <span class="sr-only"></span>
          </div>
        </button>
      </div>
    </div>
  </form>
  <div class="text-center text-muted mt-3">
    Don't have account yet?
    <a routerLink="/auth/register" tabindex="-1">Sign up</a>
  </div>
</ng-template>

<ng-template #lockForm>
  <div class="text-center mb-4">
    <a href="." class="navbar-brand navbar-brand-autodark"
      ><img src="./assets/img/static/logo.svg" height="36" alt=""
    /></a>
  </div>
  <div *ngIf="errors != ''" class="alert alert-danger">{{ errors }}</div>
  <form class="card card-md" action="." method="get" autocomplete="off">
    <div class="card-body text-center">
      <div class="mb-4">
        <h2 class="card-title">Account Locked</h2>
        <p class="text-muted">
          Please enter your password to unlock your account
        </p>
      </div>
      <div class="mb-4">
        <span
          class="avatar avatar-xl mb-3"
          style="background-image: url(./assets/img/static/avatars/default-profile.jpg)"
        ></span>
        <h3>{{user.username}}</h3>
      </div>
      <div class="mb-4">
        <input
          type="password"
          id="password"
          class="form-control"
          placeholder="Password"
          [class.is-invalid]="password.invalid && password.touched"
          name="password"
          [(ngModel)]="user.password"
          #password="ngModel"
          required
          placeholder="Password&hellip;"
        />
        <div *ngIf="password.errors && (password.valid || password.touched)">
          <p class="text-danger" *ngIf="password.errors?.required">
            Please Enter your Password
          </p>
        </div>
      </div>
      <div>
        <a type="button" (click)="onLogin()" class="btn btn-primary w-100">
          <!-- Download SVG icon from http://tabler-icons.io/i/lock-open -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <rect x="5" y="11" width="14" height="10" rx="2" />
            <circle cx="12" cy="16" r="1" />
            <path d="M8 11v-5a4 4 0 0 1 8 0" />
          </svg>
          Unlock
        </a>
      </div>
    </div>
  </form>
</ng-template>
