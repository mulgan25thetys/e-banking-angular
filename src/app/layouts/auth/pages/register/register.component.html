<div class="text-center mb-4">
  <a href="." class="navbar-brand navbar-brand-autodark"
    ><img src="./assets/img/static/logo.svg" height="76" alt=""
  /></a>
</div>
<div *ngIf="info" [ngClass]="classInfo">{{ infoMessage }}</div>
<form class="card card-md" #formRegister="ngForm">
  <div class="card-body">
    <h2 class="card-title text-center mb-4">Create new account</h2>
    <div class="mb-3">
      <label class="form-label">UserName</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="username.invalid && username.touched"
        placeholder="Enter your username"
        name="username"
        #username="ngModel" 
        [(ngModel)]="user.username"
        required
        maxlength="30"
      />
      <div *ngIf="username.errors && (username.valid || username.touched)">
        <p class="text-danger" *ngIf="username.errors?.required">
          Please Enter your username
        </p>
        <p class="text-danger" *ngIf="username.errors?.maxlength">
          Username maximun 30 caracters!
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">First Name</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="firstname.invalid && firstname.touched"
        placeholder="Enter first name"
        name="firstname"
        #firstname="ngModel"
        [(ngModel)]="user.firstname"
        required
      />
      <div *ngIf="firstname.errors && (firstname.valid || firstname.touched)">
        <p class="text-danger" *ngIf="firstname.errors?.required">
          Please Enter your First Name
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Last name</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="lastname.invalid && lastname.touched"
        placeholder="Enter last name"
        name="lastname"
        #lastname="ngModel"
        [(ngModel)]="user.lastname"
        required
      />
      <div *ngIf="lastname.errors && (lastname.valid || lastname.touched)">
        <p class="text-danger" *ngIf="lastname.errors?.required">
          Please Enter your Last Name
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Email address</label>
      <input
        type="text"
        class="form-control"
        [class.is-invalid]="email.invalid && email.touched"
        placeholder="Enter email"
        name="email"
        #email="ngModel"
        [(ngModel)]="user.email"
        required
        pattern="^[a-z0-9-.]+@[a-z-]+\.[a-z]{2,3}$"
      />
      <div *ngIf="email.errors && (email.valid || email.touched)">
        <p class="text-danger" *ngIf="email.errors?.required">
          Please Enter your Email Address
        </p>
        <p class="text-danger" *ngIf="email.errors?.pattern">
          Invalid Email Address
        </p>
      </div>
    </div>
    
      <div class="mb-3">
        <label class="form-label student-detail">Region</label>
        <input type="text" class="form-control"
        [class.is-invalid]="region.invalid && region.touched" placeholder="Enter region" name="region" required #region=ngModel [(ngModel)]="user.region" />
        <div *ngIf="region.errors && (region.valid || region.touched)">
          <p class="text-danger" *ngIf="region.errors?.required">
            Please Enter your Region
          </p>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label student-detail">Contact</label>
        <input type="number" minlength="8" maxlength="11" class="form-control" [class.is-invalid]="contact.invalid && contact.touched"
          placeholder="Enter contact" name="contact" required #contact=ngModel [(ngModel)]="user.contact" />
        <div *ngIf="contact.errors && (contact.valid || contact.touched)">
          <p class="text-danger" *ngIf="contact.errors?.required">
            Please Enter your contact
          </p>
        </div>
      </div>

    <div class="mb-3">
      <label class="form-label">Password</label>
      <div class="input-group input-group-flat">
        <input
          type="password"
          id="password"
          class="form-control"
          [class.is-invalid]="password.invalid && password.touched"
          placeholder="Password"
          autocomplete="off"
          name="password"
          #password="ngModel"
          [(ngModel)]="user.password"
          required
          minlength="8"
        />
      </div>
      <div *ngIf="password.errors && (password.valid || password.touched)">
        <p class="text-danger" *ngIf="password.errors?.required">
          Please Enter your Password
        </p>
        <p class="text-danger" *ngIf="password.errors?.minlength">
          Please minimum 8 carateres
        </p>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Confirm Password</label>
      <div class="input-group input-group-flat">
        <input
          type="password"
          id="confirmpassword"
          class="form-control"
          [class.is-invalid]="(confirmpassword.invalid || !confirmPassword() ) && confirmpassword.touched"
          placeholder="Confirm Password"
          autocomplete="off"
          name="confirmpassword"
          #confirmpassword="ngModel"
          [(ngModel)]="user.confirmpassword"
          required
          minlength="8"
        />
      </div>
      <div
        *ngIf="
          confirmpassword.errors &&
          (confirmpassword.valid || confirmpassword.touched)
        "
      >
        <p class="text-danger" *ngIf="confirmpassword.errors?.required">
          Please Confirm your Password
        </p>
        <p class="text-danger" *ngIf="confirmpassword.errors?.minlength">
          Please minimum 8 carateres
        </p>
      </div>
      <p *ngIf="!confirmPassword()" class="text-danger">
        Password and Confirm password not matches
      </p>
    </div>
    <span class="" >
      <a (click)="showPassword()" style="cursor: pointer;margin-right:5px" class="link-secondary" title="Show password" data-bs-toggle="tooltip">
        <!-- Download SVG icon from http://tabler-icons.io/i/eye -->
        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="2" />
          <path d="M22 12c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7" />
        </svg>
      </a>
      <span id="showhide">show password</span>
    </span>
    <!-- <div class="mb-3">
      <label class="form-check">
        <input type="checkbox" class="form-check-input" />
        <span class="form-check-label"
          >Agree the
          <a href="./terms-of-service.html" tabindex="-1">terms and policy</a
          >.</span
        >
      </label>
    </div> -->
    <div class="form-footer">
      <button
        type="button"
        id="btn-register"
        (click)="onRegister()"
        [disabled]="formRegister.invalid || !confirmPassword()"
        class="btn btn-primary w-100"
      >
        Create new account 
        <div *ngIf="loading" class="spinner-grow text-light" role="status">
            <span class="sr-only"></span>
        </div>
      </button>
    </div>
  </div>
</form>
<div class="text-center text-muted mt-3">
  Already have account? <a routerLink="/auth/login" tabindex="-1">Sign in</a>
</div>
